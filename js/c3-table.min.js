(function(){var n=function(n,t){return function(){return n.apply(t,arguments)}},i={}.hasOwnProperty,r=function(n,t){function u(){this.constructor=n}for(var r in t)i.call(t,r)&&(n[r]=t[r]);return u.prototype=t.prototype,n.prototype=new u,n.__super__=t.prototype,n},t=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};c3.Table=function(i){function u(){this.select=n(this.select,this);this.highlight=n(this.highlight,this);this.sort=n(this.sort,this);this._style=n(this._style,this);this._update=n(this._update,this);this._update_headers=n(this._update_headers,this);this._init=n(this._init,this);u.__super__.constructor.apply(this,arguments);this.selections=[]}return r(u,i),u.version=.1,u.prototype.type="table",u.prototype.data=[],u.prototype.key=void 0,u.prototype.filter=void 0,u.prototype.columns=[],u.prototype.selectable=!1,u.prototype.sortable=!1,u.prototype.sort_column=void 0,u.prototype.limit_rows=void 0,u.prototype.pagination=!1,u.prototype.table_options=void 0,u.prototype.table_header_options=void 0,u.prototype.header_options=void 0,u.prototype.footer_options=void 0,u.prototype.table_body_options=void 0,u.prototype.row_options=void 0,u.prototype.cell_options=void 0,u.prototype.vis_options=void 0,u.prototype._init=function(){var n,r,u,f,e,t,o,i;for(this.table=c3.select(d3.select(this.anchor),"table").singleton(),this.table_options==null&&(this.table_options={}),(r=this.table_options).styles==null&&(r.styles={}),(u=this.table_options.styles).width==null&&(u.width="100%"),this.table.options(this.table_options).update(),this.header=this.table.inherit("thead").inherit("tr"),this.header.options(this.table_header_options).update(),this.body=this.table.inherit("tbody"),this.body.options(this.table_body_options).update(),this.next_column_key==null&&(this.next_column_key=0),i=this.columns,t=0,o=i.length;t<o;t++){if(n=i[t],n.key==null&&(n.key=this.next_column_key++),n.header==null&&(n.header={}),(f=n.header).text==null&&(f.text=""),n.cells==null&&(n.cells={}),(e=n.cells).text==null&&(e.text=""),n.sortable==null&&(n.sortable=n.sort!=null),n.value==null&&(n.value=n.sort),n.sort==null&&(n.sort=n.value),n.sortable&&n.sort==null)throw"column.sort() or column.value() not defined for a sortable column";if(n.vis&&n.value==null)throw"column.value() not defined for a column with a column.vis visualization";}return this._update_headers()},u.prototype._update_headers=function(){var n;n=this;this.headers=this.header.select("th").bind(this.columns,function(n){return n.key}).options(this.header_options,function(n){return n.header}).update();this.headers["new"].on("click.sort",function(n){return function(t){if(n.sortable&&t.sortable)return n.sort(t)}}(this));if(this.sortable)return this.headers.all.each(function(t){var i;if(t===n.sort_column)return i=d3.select(this),i.html(i.html()+("<span class='arrow' style='float:right'>"+(t.sort_ascending?"▲":"▼")+"<\/span>"))})},u.prototype._update=function(n){var e,t,o,nt,tt,s,r,h,c,l,a,v,i,y,p,w,u,f,it,rt,b,ut,ft,k,d,g;for(w=this,b=this.columns,u=0,it=b.length;u<it;u++)if((t=b[u],t.vis)&&(t.value_total=(ut=(ft=typeof t.total_value=="function"?t.total_value():void 0)!=null?ft:t.total_value)!=null?ut:void 0,t.value_total==null))for(t.value_total=0,k=this.data,f=0,rt=k.length;f<rt;f++)tt=k[f],t.value_total+=t.value(tt);if(this.current_data=this.filter!=null?function(){var n,u,t,i;for(t=this.data,i=[],r=n=0,u=t.length;n<u;r=++n)o=t[r],this.filter(o,r)&&i.push(o);return i}.call(this):this.data,this.sort_column!=null&&(this.filter==null&&(this.current_data=this.current_data.slice(0)),c3.array.sort_up(this.current_data,this.sort_column.sort),this.sort_column.sort_ascending||this.current_data.reverse()),nt=this.limit_rows==null?this.current_data:(this.pagination===!0?this.pagination=1:void 0,this.pagination=Math.max(1,Math.min(Math.ceil(this.current_data.length/this.limit_rows),this.pagination)),this.current_data.slice(this.limit_rows*(this.pagination-1),+(this.limit_rows*this.pagination-1)+1||9e9)),this.rows=this.body.select("tr").bind(nt,this.key),this.rows.options(this.row_options).update(),this.key!=null&&this.rows.all.order(),this.cells=this.rows.select("td").bind(function(n){return function(i){var r,e,u,f;for(u=n.columns,f=[],r=0,e=u.length;r<e;r++)t=u[r],f.push(i);return f}}(this),function(n){return function(t,i){return n.columns[i].key}}(this)),this.columns.some(function(n){return n.vis!=null})?(this.vis=this.cells.inherit("div.vis"),this.vis.options(this.vis_options,function(n){return function(t,i){return n.columns[i].vis_options}}(this)).update(),e=this.vis.inherit("span"),this.vis.all.each(function(n,i){t=w.columns[i%w.columns.length];switch(t.vis){case"bar":return d3.select(this).classed("bar",!0).style("width",t.value(n)/t.value_total*100+"%")}})):e=this.cells,e.options(this.cell_options,function(n){return function(t,i){return n.columns[i].cells}}(this)).update(),this.cells.options(this.cell_options,function(n){return function(t,i){return n.columns[i].cells}}(this)),this.selectable){(n==="render"?this.rows.all:this.rows["new"]).on("click.select",function(n){return function(t){return n.select(c3.Table.set_select(n.selections,t,n.selectable==="multi"||n.selectable===!0&&d3.event.ctrlKey))}}(this));this.highlight()}else if(n==="render")this.rows.all.on("click.select",null);if(this.pagination&&this.current_data.length>this.limit_rows){this.footer=this.table.select("caption").singleton().options(this.footer_options).update();a=Math.ceil(this.current_data.length/this.limit_rows);i=3;s=this.footer.select("span.first.button").singleton();s["new"].text("◀◀").on("click",function(n){return function(){return n.pagination=1,n.redraw()}}(this));s.all.classed("disabled",this.pagination<=1);y=this.footer.select("span.prev.button").singleton();y["new"].text("◀").on("click",function(n){return function(){return n.pagination--,n.redraw()}}(this));y.all.classed("disabled",this.pagination<=1);p=this.footer.select("span.prev_ellipses").singleton();p["new"].text("…");p.all.style("display",this.pagination>i+1?"":"none");v=this.footer.select("ul.pagination").singleton().select("li").bind(function(){g=[];for(var n=d=Math.max(1,this.pagination-i),t=Math.min(a,this.pagination+i);d<=t?n<=t:n>=t;d<=t?n++:n--)g.push(n);return g}.apply(this));v.all.classed("active",function(n){return function(t){return t===n.pagination}}(this)).on("click",function(n){return function(t){return n.pagination=t,n.redraw()}}(this));v.inherit("a").all.text(function(n){return n});l=this.footer.select("span.next_ellipses").singleton();l["new"].text("…");l.all.style("display",a-this.pagination>i?"":"none");c=this.footer.select("span.next.button").singleton();c["new"].text("▶").on("click",function(n){return function(){return n.pagination++,n.redraw()}}(this));c.all.classed("disabled",this.pagination>=this.current_data.length/this.limit_rows);h=this.footer.select("span.last.button").singleton();h["new"].text("▶▶").on("click",function(n){return function(){return n.pagination=Math.ceil(n.current_data.length/n.limit_rows),n.redraw()}}(this));return h.all.classed("disabled",this.pagination>=this.current_data.length/this.limit_rows)}return this.table.select("caption").remove()},u.prototype._style=function(n){var r,o,u,t,f,i,e;if(o=this,this.table.style().all.classed({c3:!0,table:!0,sortable:this.sortable,selectable:this.selectable,single_select:this.selectable==="single",multi_select:this.selectable==="multi"}),this["class"]!=null)for(i=this["class"].split(" "),t=0,f=i.length;t<f;t++)r=i[t],this.table.all.classed(r,!0);return this.header.style(),this.headers.style(n).all.classed({sortable:this.sortable?function(n){return n.sort!=null}:!1,sorted:function(n){return function(t){return t===n.sort_column}}(this)}),this.body.style(),this.rows.style(n),u=this.columns.indexOf(this.sort_column),this.cells.style(n&&this.key!=null).all.classed({sorted:function(n,t){return t===u}}),(e=this.vis)!=null?e.style(n&&this.key!=null):void 0},u.prototype.sort=function(n,t){if(n.sort)return t!=null?n.sort_ascending=t:this.sort_column===n&&(n.sort_ascending=!n.sort_ascending),this.sort_column=n,this._update_headers(),this.redraw("sort")},u.prototype.highlight=function(n){return this.selections=n!=null?n:this.selections,this.rows.all.classed("selected",this.selections.length?function(n){return function(i){return t.call(n.selections,i)>=0}}(this):!1),this.rows.all.classed("deselected",this.selections.length?function(n){return function(i){return!(t.call(n.selections,i)>=0)}}(this):!1)},u.prototype.select=function(n){return this.selections=n!=null?n:this.selections,this.highlight(),this.trigger("select",this.selections)},u.set_select=function(n,i,r){if(n==null)return[i];if(r)t.call(n,i)>=0?c3.array.remove_item(n,i):n.push(i);else switch(n.length){case 0:n.push(i);break;case 1:t.call(n,i)>=0?n.length=0:(n.length=0,n.push(i));break;default:n.length=0;n.push(i)}return n},u}(c3.Base)}).call(this);